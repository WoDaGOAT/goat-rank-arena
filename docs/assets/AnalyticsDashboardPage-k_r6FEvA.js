import{c as $e,bw as ut,bx as dt,by as W,R as x,bz as ft,r as we,a as K,s as S,j as i,l as I,m as $,ab as D,n as F,u as Nt,S as L,b1 as Ve,b3 as We,b4 as Ze,bd as Pt,be as Tt,B as St,bf as Mt,a9 as se,bc as Rt,bA as Et,a6 as Ct,E as Lt,T as It,F as $t}from"./index-D6Dh-tOY.js";import{a as ye,s as Dt,C as Ft}from"./calendar-Cp1CsHJb.js";import{f as m}from"./format-BHf82gLm.js";import{f as O,_ as pt,b as mt,c as Kt,d as Ut,i as G,e as De,p as z,g as U,h as yt,j as Fe,k as ht,D as Bt,l as zt,m as re,n as X,S as qt,A as Vt,o as Wt,q as Ye,r as Zt,s as J,t as Yt,G as Ht,u as Gt,v as Qt,w as he,x as He,y as xe,z as Xt,B as Ke,E as gt,F as ke,X as de,Y as fe,H as Jt,I as er,R as pe,L as tr,C as Oe,T as me,a as rr,J as nr}from"./LineChart-CXZp6k_F.js";import{T as Re}from"./trending-up-C7CvnSET.js";import{T as ar}from"./trending-down-CZzN4wpH.js";import{S as ir}from"./shield-alert-CDJYaQEO.js";import{C as sr}from"./calendar-BKtBvoYG.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=$e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=$e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=$e("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);function Qe(r,e){const t=fr(r);let a;if(t.date){const c=pr(t.date,2);a=mr(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const s=a.getTime();let o=0,u;if(t.time&&(o=yr(t.time),isNaN(o)))return new Date(NaN);if(t.timezone){if(u=hr(t.timezone),isNaN(u))return new Date(NaN)}else{const c=new Date(s+o),l=new Date(0);return l.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),l.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),l}return new Date(s+o+u)}const ge={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},lr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ur=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,dr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function fr(r){const e={},n=r.split(ge.dateTimeDelimiter);let t;if(n.length>2)return e;if(/:/.test(n[0])?t=n[0]:(e.date=n[0],t=n[1],ge.timeZoneDelimiter.test(e.date)&&(e.date=r.split(ge.timeZoneDelimiter)[0],t=r.substr(e.date.length,r.length))),t){const a=ge.timezone.exec(t);a?(e.time=t.replace(a[1],""),e.timezone=a[1]):e.time=t}return e}function pr(r,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),t=r.match(n);if(!t)return{year:NaN,restDateString:""};const a=t[1]?parseInt(t[1]):null,s=t[2]?parseInt(t[2]):null;return{year:s===null?a:s*100,restDateString:r.slice((t[1]||t[2]).length)}}function mr(r,e){if(e===null)return new Date(NaN);const n=r.match(lr);if(!n)return new Date(NaN);const t=!!n[4],a=oe(n[1]),s=oe(n[2])-1,o=oe(n[3]),u=oe(n[4]),c=oe(n[5])-1;if(t)return jr(e,u,c)?gr(e,u,c):new Date(NaN);{const l=new Date(0);return!xr(e,s,o)||!br(e,a)?new Date(NaN):(l.setUTCFullYear(e,s,Math.max(a,o)),l)}}function oe(r){return r?parseInt(r):1}function yr(r){const e=r.match(ur);if(!e)return NaN;const n=Me(e[1]),t=Me(e[2]),a=Me(e[3]);return _r(n,t,a)?n*ut+t*dt+a*1e3:NaN}function Me(r){return r&&parseFloat(r.replace(",","."))||0}function hr(r){if(r==="Z")return 0;const e=r.match(dr);if(!e)return 0;const n=e[1]==="+"?-1:1,t=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return Ar(t,a)?n*(t*ut+a*dt):NaN}function gr(r,e,n){const t=new Date(0);t.setUTCFullYear(r,0,4);const a=t.getUTCDay()||7,s=(e-1)*7+n+1-a;return t.setUTCDate(t.getUTCDate()+s),t}const vr=[31,null,31,30,31,30,31,31,30,31,30,31];function vt(r){return r%400===0||r%4===0&&r%100!==0}function xr(r,e,n){return e>=0&&e<=11&&n>=1&&n<=(vr[e]||(vt(r)?29:28))}function br(r,e){return e>=1&&e<=(vt(r)?366:365)}function jr(r,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function _r(r,e,n){return r===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&r>=0&&r<25}function Ar(r,e){return e>=0&&e<=59}var wr=["points","className","baseLinePoints","connectNulls"];function ee(){return ee=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},ee.apply(this,arguments)}function kr(r,e){if(r==null)return{};var n=Or(r,e),t,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(a=0;a<s.length;a++)t=s[a],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Or(r,e){if(r==null)return{};var n={};for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){if(e.indexOf(t)>=0)continue;n[t]=r[t]}return n}function Xe(r){return Sr(r)||Tr(r)||Pr(r)||Nr()}function Nr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(r,e){if(r){if(typeof r=="string")return Ee(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(r,e)}}function Tr(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Sr(r){if(Array.isArray(r))return Ee(r)}function Ee(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}var Je=function(e){return e&&e.x===+e.x&&e.y===+e.y},Mr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(t){Je(t)?n[n.length-1].push(t):n[n.length-1].length>0&&n.push([])}),Je(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},le=function(e,n){var t=Mr(e);n&&(t=[t.reduce(function(s,o){return[].concat(Xe(s),Xe(o))},[])]);var a=t.map(function(s){return s.reduce(function(o,u,c){return"".concat(o).concat(c===0?"M":"L").concat(u.x,",").concat(u.y)},"")}).join("");return t.length===1?"".concat(a,"Z"):a},Rr=function(e,n,t){var a=le(e,t);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(le(n.reverse(),t).slice(1))},Er=function(e){var n=e.points,t=e.className,a=e.baseLinePoints,s=e.connectNulls,o=kr(e,wr);if(!n||!n.length)return null;var u=W("recharts-polygon",t);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",l=Rr(n,a,s);return x.createElement("g",{className:u},x.createElement("path",ee({},O(o,!0),{fill:l.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:l})),c?x.createElement("path",ee({},O(o,!0),{fill:"none",d:le(n,s)})):null,c?x.createElement("path",ee({},O(o,!0),{fill:"none",d:le(a,s)})):null)}var p=le(n,s);return x.createElement("path",ee({},O(o,!0),{fill:p.slice(-1)==="Z"?o.fill:"none",className:u,d:p}))},Cr=pt,Lr=Kt,Ir=mt;function $r(r,e){return r&&r.length?Cr(r,Ir(e),Lr):void 0}var Dr=$r;const Fr=ft(Dr);var Kr=pt,Ur=mt,Br=Ut;function zr(r,e){return r&&r.length?Kr(r,Ur(e),Br):void 0}var qr=zr;const Vr=ft(qr);var Wr=["cx","cy","angle","ticks","axisLine"],Zr=["ticks","tick","angle","tickFormatter","stroke"];function ne(r){"@babel/helpers - typeof";return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(r)}function ue(){return ue=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},ue.apply(this,arguments)}function et(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,t)}return n}function Y(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?et(Object(n),!0).forEach(function(t){Ne(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function tt(r,e){if(r==null)return{};var n=Yr(r,e),t,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(a=0;a<s.length;a++)t=s[a],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Yr(r,e){if(r==null)return{};var n={};for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){if(e.indexOf(t)>=0)continue;n[t]=r[t]}return n}function Hr(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,bt(t.key),t)}}function Gr(r,e,n){return e&&rt(r.prototype,e),n&&rt(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Qr(r,e,n){return e=je(e),Xr(r,xt()?Reflect.construct(e,n||[],je(r).constructor):e.apply(r,n))}function Xr(r,e){if(e&&(ne(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jr(r)}function Jr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xt(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xt=function(){return!!r})()}function je(r){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},je(r)}function en(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ce(r,e)}function Ce(r,e){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},Ce(r,e)}function Ne(r,e,n){return e=bt(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function bt(r){var e=tn(r,"string");return ne(e)=="symbol"?e:e+""}function tn(r,e){if(ne(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,e||"default");if(ne(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Pe=function(r){function e(){return Hr(this,e),Qr(this,e,arguments)}return en(e,r),Gr(e,[{key:"getTickValueCoord",value:function(t){var a=t.coordinate,s=this.props,o=s.angle,u=s.cx,c=s.cy;return z(u,c,a,o)}},{key:"getTickTextAnchor",value:function(){var t=this.props.orientation,a;switch(t){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var t=this.props,a=t.cx,s=t.cy,o=t.angle,u=t.ticks,c=Fr(u,function(p){return p.coordinate||0}),l=Vr(u,function(p){return p.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:l.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var t=this.props,a=t.cx,s=t.cy,o=t.angle,u=t.ticks,c=t.axisLine,l=tt(t,Wr),p=u.reduce(function(h,d){return[Math.min(h[0],d.coordinate),Math.max(h[1],d.coordinate)]},[1/0,-1/0]),v=z(a,s,p[0],o),f=z(a,s,p[1],o),y=Y(Y(Y({},O(l,!1)),{},{fill:"none"},O(c,!1)),{},{x1:v.x,y1:v.y,x2:f.x,y2:f.y});return x.createElement("line",ue({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var t=this,a=this.props,s=a.ticks,o=a.tick,u=a.angle,c=a.tickFormatter,l=a.stroke,p=tt(a,Zr),v=this.getTickTextAnchor(),f=O(p,!1),y=O(o,!1),h=s.map(function(d,g){var j=t.getTickValueCoord(d),b=Y(Y(Y(Y({textAnchor:v,transform:"rotate(".concat(90-u,", ").concat(j.x,", ").concat(j.y,")")},f),{},{stroke:"none",fill:l},y),{},{index:g},j),{},{payload:d});return x.createElement(U,ue({className:W("recharts-polar-radius-axis-tick",yt(o)),key:"tick-".concat(d.coordinate)},Fe(t.props,d,g)),e.renderTickItem(o,b,c?c(d.value,g):d.value))});return x.createElement(U,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var t=this.props,a=t.ticks,s=t.axisLine,o=t.tick;return!a||!a.length?null:x.createElement(U,{className:W("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),ht.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(t,a,s){var o;return x.isValidElement(t)?o=x.cloneElement(t,a):G(t)?o=t(a):o=x.createElement(De,ue({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(we.PureComponent);Ne(Pe,"displayName","PolarRadiusAxis");Ne(Pe,"axisType","radiusAxis");Ne(Pe,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ae(r){"@babel/helpers - typeof";return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(r)}function Q(){return Q=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},Q.apply(this,arguments)}function nt(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,t)}return n}function H(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nt(Object(n),!0).forEach(function(t){Te(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function rn(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function at(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,_t(t.key),t)}}function nn(r,e,n){return e&&at(r.prototype,e),n&&at(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function an(r,e,n){return e=_e(e),sn(r,jt()?Reflect.construct(e,n||[],_e(r).constructor):e.apply(r,n))}function sn(r,e){if(e&&(ae(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return on(r)}function on(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function jt(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jt=function(){return!!r})()}function _e(r){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_e(r)}function cn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Le(r,e)}function Le(r,e){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},Le(r,e)}function Te(r,e,n){return e=_t(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function _t(r){var e=ln(r,"string");return ae(e)=="symbol"?e:e+""}function ln(r,e){if(ae(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,e||"default");if(ae(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var un=Math.PI/180,it=1e-5,Se=function(r){function e(){return rn(this,e),an(this,e,arguments)}return cn(e,r),nn(e,[{key:"getTickLineCoord",value:function(t){var a=this.props,s=a.cx,o=a.cy,u=a.radius,c=a.orientation,l=a.tickSize,p=l||8,v=z(s,o,u,t.coordinate),f=z(s,o,u+(c==="inner"?-1:1)*p,t.coordinate);return{x1:v.x,y1:v.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(t){var a=this.props.orientation,s=Math.cos(-t.coordinate*un),o;return s>it?o=a==="outer"?"start":"end":s<-it?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var t=this.props,a=t.cx,s=t.cy,o=t.radius,u=t.axisLine,c=t.axisLineType,l=H(H({},O(this.props,!1)),{},{fill:"none"},O(u,!1));if(c==="circle")return x.createElement(Bt,Q({className:"recharts-polar-angle-axis-line"},l,{cx:a,cy:s,r:o}));var p=this.props.ticks,v=p.map(function(f){return z(a,s,o,f.coordinate)});return x.createElement(Er,Q({className:"recharts-polar-angle-axis-line"},l,{points:v}))}},{key:"renderTicks",value:function(){var t=this,a=this.props,s=a.ticks,o=a.tick,u=a.tickLine,c=a.tickFormatter,l=a.stroke,p=O(this.props,!1),v=O(o,!1),f=H(H({},p),{},{fill:"none"},O(u,!1)),y=s.map(function(h,d){var g=t.getTickLineCoord(h),j=t.getTickTextAnchor(h),b=H(H(H({textAnchor:j},p),{},{stroke:"none",fill:l},v),{},{index:d,payload:h,x:g.x2,y:g.y2});return x.createElement(U,Q({className:W("recharts-polar-angle-axis-tick",yt(o)),key:"tick-".concat(h.coordinate)},Fe(t.props,h,d)),u&&x.createElement("line",Q({className:"recharts-polar-angle-axis-tick-line"},f,g)),o&&e.renderTickItem(o,b,c?c(h.value,d):h.value))});return x.createElement(U,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var t=this.props,a=t.ticks,s=t.radius,o=t.axisLine;return s<=0||!a||!a.length?null:x.createElement(U,{className:W("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(t,a,s){var o;return x.isValidElement(t)?o=x.cloneElement(t,a):G(t)?o=t(a):o=x.createElement(De,Q({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(we.PureComponent);Te(Se,"displayName","PolarAngleAxis");Te(Se,"axisType","angleAxis");Te(Se,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var be;function ie(r){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(r)}function te(){return te=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},te.apply(this,arguments)}function st(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,t)}return n}function _(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?st(Object(n),!0).forEach(function(t){E(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function dn(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ot(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,wt(t.key),t)}}function fn(r,e,n){return e&&ot(r.prototype,e),n&&ot(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function pn(r,e,n){return e=Ae(e),mn(r,At()?Reflect.construct(e,n||[],Ae(r).constructor):e.apply(r,n))}function mn(r,e){if(e&&(ie(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yn(r)}function yn(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function At(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(At=function(){return!!r})()}function Ae(r){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ae(r)}function hn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ie(r,e)}function Ie(r,e){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},Ie(r,e)}function E(r,e,n){return e=wt(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function wt(r){var e=gn(r,"string");return ie(e)=="symbol"?e:e+""}function gn(r,e){if(ie(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,e||"default");if(ie(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var q=function(r){function e(n){var t;return dn(this,e),t=pn(this,e,[n]),E(t,"pieRef",null),E(t,"sectorRefs",[]),E(t,"id",Xt("recharts-pie-")),E(t,"handleAnimationEnd",function(){var a=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),G(a)&&a()}),E(t,"handleAnimationStart",function(){var a=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),G(a)&&a()}),t.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},t}return hn(e,r),fn(e,[{key:"isActiveIndex",value:function(t){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(t)!==-1:t===a}},{key:"hasActiveIndex",value:function(){var t=this.props.activeIndex;return Array.isArray(t)?t.length!==0:t||t===0}},{key:"renderLabels",value:function(t){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,u=s.labelLine,c=s.dataKey,l=s.valueKey,p=O(this.props,!1),v=O(o,!1),f=O(u,!1),y=o&&o.offsetRadius||20,h=t.map(function(d,g){var j=(d.startAngle+d.endAngle)/2,b=z(d.cx,d.cy,d.outerRadius+y,j),N=_(_(_(_({},p),d),{},{stroke:"none"},v),{},{index:g,textAnchor:e.getTextAnchor(b.x,d.cx)},b),C=_(_(_(_({},p),d),{},{fill:"none",stroke:d.fill},f),{},{index:g,points:[z(d.cx,d.cy,d.outerRadius,j),b]}),T=c;return re(c)&&re(l)?T="value":re(c)&&(T=l),x.createElement(U,{key:"label-".concat(d.startAngle,"-").concat(d.endAngle,"-").concat(d.midAngle,"-").concat(g)},u&&e.renderLabelLineItem(u,C,"line"),e.renderLabelItem(o,N,X(d,T)))});return x.createElement(U,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(t){var a=this,s=this.props,o=s.activeShape,u=s.blendStroke,c=s.inactiveShape;return t.map(function(l,p){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&t.length!==1)return null;var v=a.isActiveIndex(p),f=c&&a.hasActiveIndex()?c:null,y=v?o:f,h=_(_({},l),{},{stroke:u?l.fill:l.stroke,tabIndex:-1});return x.createElement(U,te({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Fe(a.props,l,p),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(p)}),x.createElement(qt,te({option:y,isActive:v,shapeType:"sector"},h)))})}},{key:"renderSectorsWithAnimation",value:function(){var t=this,a=this.props,s=a.sectors,o=a.isAnimationActive,u=a.animationBegin,c=a.animationDuration,l=a.animationEasing,p=a.animationId,v=this.state,f=v.prevSectors,y=v.prevIsAnimationActive;return x.createElement(Vt,{begin:u,duration:c,isActive:o,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(p,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(h){var d=h.t,g=[],j=s&&s[0],b=j.startAngle;return s.forEach(function(N,C){var T=f&&f[C],w=C>0?Wt(N,"paddingAngle",0):0;if(T){var V=Ye(T.endAngle-T.startAngle,N.endAngle-N.startAngle),P=_(_({},N),{},{startAngle:b+w,endAngle:b+V(d)+w});g.push(P),b=P.endAngle}else{var B=N.endAngle,M=N.startAngle,Z=Ye(0,B-M),A=Z(d),k=_(_({},N),{},{startAngle:b+w,endAngle:b+A+w});g.push(k),b=k.endAngle}}),x.createElement(U,null,t.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(t){var a=this;t.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var u=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[u].focus(),a.setState({sectorToFocus:u});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var t=this.props,a=t.sectors,s=t.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!Zt(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var t=this,a=this.props,s=a.hide,o=a.sectors,u=a.className,c=a.label,l=a.cx,p=a.cy,v=a.innerRadius,f=a.outerRadius,y=a.isAnimationActive,h=this.state.isAnimationFinished;if(s||!o||!o.length||!J(l)||!J(p)||!J(v)||!J(f))return null;var d=W("recharts-pie",u);return x.createElement(U,{tabIndex:this.props.rootTabIndex,className:d,ref:function(j){t.pieRef=j}},this.renderSectors(),c&&this.renderLabels(o),ht.renderCallByParent(this.props,null,!1),(!y||h)&&Yt.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(t,a){return a.prevIsAnimationActive!==t.isAnimationActive?{prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,curSectors:t.sectors,prevSectors:[],isAnimationFinished:!0}:t.isAnimationActive&&t.animationId!==a.prevAnimationId?{prevAnimationId:t.animationId,curSectors:t.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:t.sectors!==a.curSectors?{curSectors:t.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(t,a){return t>a?"start":t<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(t,a,s){if(x.isValidElement(t))return x.cloneElement(t,a);if(G(t))return t(a);var o=W("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return x.createElement(zt,te({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(t,a,s){if(x.isValidElement(t))return x.cloneElement(t,a);var o=s;if(G(t)&&(o=t(a),x.isValidElement(o)))return o;var u=W("recharts-pie-label-text",typeof t!="boolean"&&!G(t)?t.className:"");return x.createElement(De,te({},a,{alignmentBaseline:"middle",className:u}),o)}}])}(we.PureComponent);be=q;E(q,"displayName","Pie");E(q,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ht.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});E(q,"parseDeltaAngle",function(r,e){var n=xe(e-r),t=Math.min(Math.abs(e-r),360);return n*t});E(q,"getRealPieData",function(r){var e=r.data,n=r.children,t=O(r,!1),a=Gt(n,Ke);return e&&e.length?e.map(function(s,o){return _(_(_({payload:s},t),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return _(_({},t),s.props)}):[]});E(q,"parseCoordinateOfPie",function(r,e){var n=e.top,t=e.left,a=e.width,s=e.height,o=Qt(a,s),u=t+he(r.cx,a,a/2),c=n+he(r.cy,s,s/2),l=he(r.innerRadius,o,0),p=he(r.outerRadius,o,o*.8),v=r.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:u,cy:c,innerRadius:l,outerRadius:p,maxRadius:v}});E(q,"getComposedData",function(r){var e=r.item,n=r.offset,t=e.type.defaultProps!==void 0?_(_({},e.type.defaultProps),e.props):e.props,a=be.getRealPieData(t);if(!a||!a.length)return null;var s=t.cornerRadius,o=t.startAngle,u=t.endAngle,c=t.paddingAngle,l=t.dataKey,p=t.nameKey,v=t.valueKey,f=t.tooltipType,y=Math.abs(t.minAngle),h=be.parseCoordinateOfPie(t,n),d=be.parseDeltaAngle(o,u),g=Math.abs(d),j=l;re(l)&&re(v)?(He(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):re(l)&&(He(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=v);var b=a.filter(function(P){return X(P,j,0)!==0}).length,N=(g>=360?b:b-1)*c,C=g-b*y-N,T=a.reduce(function(P,B){var M=X(B,j,0);return P+(J(M)?M:0)},0),w;if(T>0){var V;w=a.map(function(P,B){var M=X(P,j,0),Z=X(P,p,B),A=(J(M)?M:0)/T,k;B?k=V.endAngle+xe(d)*c*(M!==0?1:0):k=o;var Be=k+xe(d)*((M!==0?y:0)+A*C),ze=(k+Be)/2,qe=(h.innerRadius+h.outerRadius)/2,kt=[{name:Z,value:M,payload:P,dataKey:j,type:f}],Ot=z(h.cx,h.cy,qe,ze);return V=_(_(_({percent:A,cornerRadius:s,name:Z,tooltipPayload:kt,midAngle:ze,middleRadius:qe,tooltipPosition:Ot},P),h),{},{value:X(P,j),startAngle:k,endAngle:Be,payload:P,paddingAngle:xe(d)*c}),V})}return _(_({},h),{},{sectors:w,data:a})});var Ue=gt({chartName:"BarChart",GraphicalChild:ke,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:de},{axisType:"yAxis",AxisComp:fe}],formatAxisMap:Jt}),vn=gt({chartName:"PieChart",GraphicalChild:q,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Se},{axisType:"radiusAxis",AxisComp:Pe}],formatAxisMap:er,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const xn=(r,e)=>{const{data:n,isLoading:t,error:a}=K({queryKey:["analytics-dashboard",m(r,"yyyy-MM-dd"),m(e,"yyyy-MM-dd")],queryFn:async()=>{const{data:f,error:y}=await S.rpc("get_analytics_dashboard",{start_date:m(r,"yyyy-MM-dd"),end_date:m(e,"yyyy-MM-dd")});if(y)throw y;return f||[]},enabled:!!r&&!!e}),{data:s,isLoading:o,error:u}=K({queryKey:["conversion-funnel",m(r,"yyyy-MM-dd"),m(e,"yyyy-MM-dd")],queryFn:async()=>{const{data:f,error:y}=await S.rpc("get_conversion_funnel",{start_date:m(r,"yyyy-MM-dd"),end_date:m(e,"yyyy-MM-dd")});if(y)throw y;return f||[]},enabled:!!r&&!!e}),{data:c}=K({queryKey:["total-users"],queryFn:async()=>{const{count:f,error:y}=await S.from("profiles").select("*",{count:"exact",head:!0});if(y)throw y;return f||0}}),{data:l}=K({queryKey:["active-users-today"],queryFn:async()=>{const f=m(new Date,"yyyy-MM-dd"),{data:y,error:h}=await S.from("analytics_events").select("user_id").gte("created_at",`${f}T00:00:00Z`).not("user_id","is",null);if(h)throw h;return new Set((y==null?void 0:y.map(g=>g.user_id))||[]).size}}),{data:p}=K({queryKey:["draft-rankings",m(r,"yyyy-MM-dd"),m(e,"yyyy-MM-dd")],queryFn:async()=>{const{count:f,error:y}=await S.from("user_rankings").select("*",{count:"exact",head:!0}).gte("created_at",m(r,"yyyy-MM-dd")).lte("created_at",m(e,"yyyy-MM-dd")).is("description",null);if(y)throw y;return f||0}}),{data:v}=K({queryKey:["top-categories",m(r,"yyyy-MM-dd"),m(e,"yyyy-MM-dd")],queryFn:async()=>{const{data:f,error:y}=await S.from("user_rankings").select(`
          category_id,
          categories!inner(name)
        `).gte("created_at",m(r,"yyyy-MM-dd")).lte("created_at",m(e,"yyyy-MM-dd"));if(y)throw y;const h={};return f==null||f.forEach(d=>{var j;const g=(j=d.categories)==null?void 0:j.name;g&&(h[g]=(h[g]||0)+1)}),Object.entries(h).map(([d,g])=>({name:d,count:g})).sort((d,g)=>g.count-d.count).slice(0,10)}});return{analyticsData:n,conversionData:s,totalUsers:c,activeUsersToday:l,draftRankings:p,topCategories:v,isLoading:t||o,error:a||u}},bn=()=>{const{data:r}=K({queryKey:["user-activity-metrics",m(new Date,"yyyy-MM-dd")],queryFn:async()=>{const e=new Date,n=ye(e,-1),t=ye(e,-7),a=ye(e,-30),s=ye(e,-60),{data:o,error:u}=await S.from("user_sessions").select("user_id").gte("created_at",m(n,"yyyy-MM-dd")).lt("created_at",m(e,"yyyy-MM-dd")).not("user_id","is",null);if(u)throw u;const c=new Set((o==null?void 0:o.map(w=>w.user_id))||[]).size,{data:l,error:p}=await S.from("user_sessions").select("user_id").gte("created_at",m(t,"yyyy-MM-dd")).not("user_id","is",null);if(p)throw p;const v=new Set((l==null?void 0:l.map(w=>w.user_id))||[]).size,{data:f,error:y}=await S.from("user_sessions").select("user_id").gte("created_at",m(a,"yyyy-MM-dd")).not("user_id","is",null);if(y)throw y;const h=new Set((f==null?void 0:f.map(w=>w.user_id))||[]).size,d=h>0?c/h*100:0,{data:g,error:j}=await S.from("user_sessions").select("user_id").gte("created_at",m(s,"yyyy-MM-dd")).lt("created_at",m(a,"yyyy-MM-dd")).not("user_id","is",null);if(j)throw j;const b=new Set((g==null?void 0:g.map(w=>w.user_id))||[]),N=new Set((f==null?void 0:f.map(w=>w.user_id))||[]),C=[...b].filter(w=>!N.has(w)),T=b.size>0?C.length/b.size*100:0;return{dau:c,wau:v,mau:h,dau_mau_ratio:Math.round(d*100)/100,churn_rate:Math.round(T*100)/100}}});return{userActivityMetrics:r}},jn=(r,e)=>{const{data:n}=K({queryKey:["session-analytics",m(r,"yyyy-MM-dd"),m(e,"yyyy-MM-dd")],queryFn:async()=>{const{data:t,error:a}=await S.from("user_sessions").select("time_on_site, page_views").gte("created_at",m(r,"yyyy-MM-dd")).lte("created_at",m(e,"yyyy-MM-dd")).not("time_on_site","is",null).not("page_views","is",null);if(a)throw a;const s=t||[],o=s.length;if(o===0)return{total_sessions:0,avg_session_length:0,avg_pages_per_session:0};const u=s.reduce((l,p)=>l+(p.time_on_site||0),0),c=s.reduce((l,p)=>l+(p.page_views||0),0);return{total_sessions:o,avg_session_length:Math.round(u/o),avg_pages_per_session:Math.round(c/o*100)/100}}});return{sessionAnalytics:n}},_n=(r,e)=>{const{data:n}=K({queryKey:["registration-flow",m(r,"yyyy-MM-dd"),m(e,"yyyy-MM-dd")],queryFn:async()=>{const{data:a,error:s}=await S.rpc("get_registration_flow_analytics",{start_date:m(r,"yyyy-MM-dd"),end_date:m(e,"yyyy-MM-dd")});if(s)throw s;return a||[]},enabled:!!r&&!!e}),{data:t}=K({queryKey:["ranking-flow",m(r,"yyyy-MM-dd"),m(e,"yyyy-MM-dd")],queryFn:async()=>{const{data:a,error:s}=await S.rpc("get_ranking_flow_analytics",{start_date:m(r,"yyyy-MM-dd"),end_date:m(e,"yyyy-MM-dd")});if(s)throw s;return a||[]},enabled:!!r&&!!e});return{registrationFlow:n,rankingFlow:t}},An=(r,e)=>{const{data:n}=K({queryKey:["bounce-rates",m(r,"yyyy-MM-dd"),m(e,"yyyy-MM-dd")],queryFn:async()=>{const{data:t,error:a}=await S.rpc("get_bounce_rates",{start_date:m(r,"yyyy-MM-dd"),end_date:m(e,"yyyy-MM-dd")});if(a)throw a;return t||[]},enabled:!!r&&!!e});return{bounceRates:n}},wn=(r,e)=>{const{analyticsData:n,conversionData:t,totalUsers:a,activeUsersToday:s,draftRankings:o,topCategories:u,isLoading:c,error:l}=xn(r,e),{userActivityMetrics:p}=bn(),{sessionAnalytics:v}=jn(r,e),{registrationFlow:f,rankingFlow:y}=_n(r,e),{bounceRates:h}=An(r,e);return{analyticsData:n,conversionData:t,totalUsers:a,activeUsersToday:s,userActivityMetrics:p,sessionAnalytics:v,draftRankings:o,topCategories:u,bounceRates:h,registrationFlow:f,rankingFlow:y,isLoading:c,error:l}},ce=({data:r,title:e,color:n})=>{if(!r||Object.keys(r).length===0)return i.jsx("div",{className:"h-64 flex items-center justify-center",children:i.jsxs("p",{className:"text-muted-foreground",children:["No ",e.toLowerCase()," data available"]})});const t=Object.entries(r).map(([a,s])=>({date:a,value:s,formattedDate:m(Qe(a),"MMM dd")}));return i.jsx("div",{className:"h-64",children:i.jsx(pe,{width:"100%",height:"100%",children:i.jsxs(tr,{data:t,children:[i.jsx(Oe,{strokeDasharray:"3 3",className:"opacity-30"}),i.jsx(de,{dataKey:"formattedDate",tick:{fontSize:12},tickLine:!1}),i.jsx(fe,{tick:{fontSize:12},tickLine:!1,axisLine:!1}),i.jsx(me,{labelFormatter:(a,s)=>{var u;const o=(u=s==null?void 0:s[0])==null?void 0:u.payload;return o?m(Qe(o.date),"MMM dd, yyyy"):a},formatter:a=>[a,e],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),i.jsx(rr,{type:"monotone",dataKey:"value",stroke:n,strokeWidth:2,dot:{fill:n,strokeWidth:2,r:4},activeDot:{r:6,stroke:n,strokeWidth:2}})]})})})},ve=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#f97316","#06b6d4","#84cc16"],kn=({data:r})=>{const e=r.map((n,t)=>({...n,color:ve[t%ve.length]}));return i.jsxs("div",{className:"h-64",children:[i.jsx(pe,{width:"100%",height:"100%",children:i.jsxs(Ue,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[i.jsx(Oe,{strokeDasharray:"3 3",className:"opacity-30"}),i.jsx(de,{dataKey:"traffic_source",tick:{fontSize:12},tickLine:!1}),i.jsx(fe,{tick:{fontSize:12},tickLine:!1,axisLine:!1}),i.jsx(me,{formatter:(n,t)=>t==="conversion_rate"?[`${n}%`,"Conversion Rate"]:[n,t==="total_sessions"?"Total Sessions":"Signups"],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),i.jsx(ke,{dataKey:"total_sessions",name:"total_sessions",radius:[4,4,0,0],children:e.map((n,t)=>i.jsx(Ke,{fill:n.color},`cell-${t}`))})]})}),i.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:r.map((n,t)=>i.jsxs("div",{className:"text-center p-2 rounded-lg border",children:[i.jsx("div",{className:"text-xs text-muted-foreground",children:n.traffic_source}),i.jsxs("div",{className:"text-lg font-semibold",style:{color:ve[t%ve.length]},children:[n.conversion_rate,"%"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.signups,"/",n.total_sessions]})]},n.traffic_source))})]})},R=({title:r,value:e,icon:n,trend:t,trendDirection:a="up",format:s="number"})=>{const o=u=>s==="percentage"?`${u}%`:u.toLocaleString();return i.jsxs(I,{children:[i.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(D,{className:"text-sm font-medium",children:r}),i.jsx(n,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(F,{children:[i.jsx("div",{className:"text-2xl font-bold",children:o(e)}),t&&i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[a==="up"?i.jsx(Re,{className:"h-3 w-3 text-green-500 mr-1"}):i.jsx(ar,{className:"h-3 w-3 text-red-500 mr-1"}),i.jsx("span",{className:a==="up"?"text-green-500":"text-red-500",children:t}),i.jsx("span",{className:"ml-1",children:"from last period"})]})]})]})},ct=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#f97316","#06b6d4","#84cc16"],On=({data:r})=>{if(!r||Object.keys(r).length===0)return i.jsx("div",{className:"h-64 flex items-center justify-center",children:i.jsx("p",{className:"text-muted-foreground",children:"No traffic source data available"})});const e=Object.entries(r).map(([t,a],s)=>({name:t,value:a,color:ct[s%ct.length]})),n=e.reduce((t,a)=>t+a.value,0);return n===0?i.jsx("div",{className:"h-64 flex items-center justify-center",children:i.jsx("p",{className:"text-muted-foreground",children:"No traffic data for selected period"})}):i.jsx("div",{className:"h-64",children:i.jsx(pe,{width:"100%",height:"100%",children:i.jsxs(vn,{children:[i.jsx(q,{data:e,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:e.map((t,a)=>i.jsx(Ke,{fill:t.color},`cell-${a}`))}),i.jsx(me,{formatter:t=>[`${t} (${(t/n*100).toFixed(1)}%)`,"Views"],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),i.jsx(nr,{})]})})})},Nn=({data:r})=>{const e=r.map(n=>({page:n.page_url==="/"?"Home":n.page_url.replace("/",""),bounceRate:n.bounce_rate,totalSessions:n.total_sessions}));return i.jsxs(I,{children:[i.jsx($,{children:i.jsx(D,{children:"Bounce Rates by Page"})}),i.jsx(F,{children:i.jsx("div",{className:"h-64",children:i.jsx(pe,{width:"100%",height:"100%",children:i.jsxs(Ue,{data:e,children:[i.jsx(Oe,{strokeDasharray:"3 3",className:"opacity-30"}),i.jsx(de,{dataKey:"page"}),i.jsx(fe,{}),i.jsx(me,{formatter:n=>[`${n}%`,"Bounce Rate"],labelFormatter:n=>`Page: ${n}`}),i.jsx(ke,{dataKey:"bounceRate",fill:"#ef4444"})]})})})})]})},lt=({title:r,data:e})=>{const n=e.map(t=>({step:t.step_name,conversionRate:t.conversion_rate,started:t.started_count,completed:t.completed_count,avgTime:"avg_time_seconds"in t?t.avg_time_seconds:"avg_completion_time_seconds"in t?t.avg_completion_time_seconds:0}));return i.jsxs(I,{children:[i.jsx($,{children:i.jsx(D,{children:r})}),i.jsxs(F,{children:[i.jsx("div",{className:"h-64",children:i.jsx(pe,{width:"100%",height:"100%",children:i.jsxs(Ue,{data:n,children:[i.jsx(Oe,{strokeDasharray:"3 3",className:"opacity-30"}),i.jsx(de,{dataKey:"step"}),i.jsx(fe,{}),i.jsx(me,{formatter:(t,a)=>a==="conversionRate"?[`${t}%`,"Conversion Rate"]:a==="avgTime"?[`${t}s`,"Avg Time"]:[t,a]}),i.jsx(ke,{dataKey:"conversionRate",fill:"#10b981"})]})})}),i.jsx("div",{className:"mt-4 space-y-2",children:e.map((t,a)=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"font-medium",children:t.step_name}),i.jsxs("div",{className:"flex gap-4 text-muted-foreground",children:[i.jsxs("span",{children:["Started: ",t.started_count]}),i.jsxs("span",{children:["Completed: ",t.completed_count]}),i.jsxs("span",{children:["Rate: ",t.conversion_rate,"%"]})]})]},a))})]})]})},In=()=>{var N,C,T,w,V,P,B,M,Z;const{isAdmin:r,loading:e}=Nt(),[n,t]=we.useState({from:Dt(new Date,30),to:new Date}),{analyticsData:a,conversionData:s,totalUsers:o,activeUsersToday:u,userActivityMetrics:c,sessionAnalytics:l,draftRankings:p,topCategories:v,bounceRates:f,registrationFlow:y,rankingFlow:h,isLoading:d,error:g}=wn(n.from,n.to),j=A=>{t(A)},b=A=>a==null?void 0:a.find(k=>k.metric_type===A);return e?i.jsx("div",{className:"bg-background text-foreground flex-grow flex flex-col",children:i.jsx("div",{className:"container mx-auto px-4 py-8 flex-grow",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx(L,{className:"h-10 w-1/4"}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((A,k)=>i.jsx(L,{className:"h-32 w-full"},k))}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[...Array(4)].map((A,k)=>i.jsx(L,{className:"h-64 w-full"},k))})]})})}):r?i.jsx("div",{className:"bg-background text-foreground flex-grow flex flex-col",children:i.jsx("div",{className:"container mx-auto px-4 py-8 flex-grow",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-bold",children:"Analytics Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Monitor user engagement, traffic sources, and conversion rates"})]}),i.jsxs(Pt,{children:[i.jsx(Tt,{asChild:!0,children:i.jsxs(St,{variant:"outline",className:"w-[260px] justify-start text-left font-normal",children:[i.jsx(sr,{className:"mr-2 h-4 w-4"}),n.from&&n.to?`${m(n.from,"MMM dd, yyyy")} - ${m(n.to,"MMM dd, yyyy")}`:"Select date range"]})}),i.jsx(Mt,{className:"w-auto p-0",align:"end",children:i.jsx(Ft,{initialFocus:!0,mode:"range",defaultMonth:n.from,selected:{from:n.from,to:n.to},onSelect:A=>{A!=null&&A.from&&(A!=null&&A.to)&&j({from:A.from,to:A.to})},numberOfMonths:2})})]})]}),g&&i.jsxs(Ve,{variant:"destructive",className:"mb-6",children:[i.jsx(We,{children:"Error Loading Analytics"}),i.jsx(Ze,{children:g.message})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5 mb-8",children:[i.jsx(R,{title:"Total Users",value:o||0,icon:se,trend:"+12%",trendDirection:"up"}),i.jsx(R,{title:"Active Today",value:u||0,icon:Re,trend:"+8%",trendDirection:"up"}),i.jsx(R,{title:"Page Views",value:((N=b("page_views"))==null?void 0:N.total_value)||0,icon:cr,trend:"+15%",trendDirection:"up"}),i.jsx(R,{title:"Signups",value:((C=b("signups"))==null?void 0:C.total_value)||0,icon:se,trend:"+23%",trendDirection:"up"}),i.jsx(R,{title:"Draft Rankings",value:p||0,icon:Rt,trend:"+5%",trendDirection:"up"})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5 mb-8",children:[i.jsx(R,{title:"Daily Active Users",value:(c==null?void 0:c.dau)||0,icon:Ge,trend:"+7%",trendDirection:"up"}),i.jsx(R,{title:"Weekly Active Users",value:(c==null?void 0:c.wau)||0,icon:se,trend:"+12%",trendDirection:"up"}),i.jsx(R,{title:"Monthly Active Users",value:(c==null?void 0:c.mau)||0,icon:se,trend:"+18%",trendDirection:"up"}),i.jsx(R,{title:"DAU/MAU Ratio",value:(c==null?void 0:c.dau_mau_ratio)||0,icon:Re,format:"percentage",trend:"+2%",trendDirection:"up"}),i.jsx(R,{title:"Churn Rate",value:(c==null?void 0:c.churn_rate)||0,icon:Et,format:"percentage",trend:"-3%",trendDirection:"down"})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3 mb-8",children:[i.jsx(R,{title:"Total Sessions",value:(l==null?void 0:l.total_sessions)||0,icon:Ge,trend:"+15%",trendDirection:"up"}),i.jsx(R,{title:"Avg Session Length",value:(l==null?void 0:l.avg_session_length)||0,icon:Ct,trend:"+8%",trendDirection:"up"}),i.jsx(R,{title:"Pages per Session",value:(l==null?void 0:l.avg_pages_per_session)||0,icon:Lt,trend:"+5%",trendDirection:"up"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(Nn,{data:f||[]})}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 mb-8",children:[i.jsx(lt,{title:"Registration Flow Analytics",data:y||[]}),i.jsx(lt,{title:"Ranking Creation Flow Analytics",data:h||[]})]}),i.jsxs("div",{className:"grid gap-6 mb-8",children:[i.jsxs(I,{children:[i.jsx($,{children:i.jsx(D,{children:"Page Views Over Time"})}),i.jsx(F,{children:d?i.jsx(L,{className:"h-64 w-full"}):i.jsx(ce,{data:((T=b("page_views"))==null?void 0:T.date_data)||{},title:"Page Views",color:"#3b82f6"})})]}),i.jsxs(I,{children:[i.jsx($,{children:i.jsx(D,{children:"Conversion Funnel by Traffic Source"})}),i.jsx(F,{children:d?i.jsx(L,{className:"h-64 w-full"}):i.jsx(kn,{data:s||[]})})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 mb-8",children:[i.jsxs(I,{children:[i.jsx($,{children:i.jsxs(D,{className:"flex items-center gap-2",children:[i.jsx(se,{className:"h-5 w-5"}),"User Signups"]})}),i.jsx(F,{children:d?i.jsx(L,{className:"h-48 w-full"}):i.jsx(ce,{data:((w=b("signups"))==null?void 0:w.date_data)||{},title:"Signups",color:"#10b981"})})]}),i.jsxs(I,{children:[i.jsx($,{children:i.jsxs(D,{className:"flex items-center gap-2",children:[i.jsx(It,{className:"h-5 w-5"}),"Rankings Created"]})}),i.jsx(F,{children:d?i.jsx(L,{className:"h-48 w-full"}):i.jsx(ce,{data:((V=b("rankings_created"))==null?void 0:V.date_data)||{},title:"Rankings",color:"#f59e0b"})})]}),i.jsxs(I,{children:[i.jsx($,{children:i.jsxs(D,{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-5 w-5"}),"Comments Posted"]})}),i.jsx(F,{children:d?i.jsx(L,{className:"h-48 w-full"}):i.jsx(ce,{data:((P=b("comments_posted"))==null?void 0:P.date_data)||{},title:"Comments",color:"#8b5cf6"})})]}),i.jsxs(I,{children:[i.jsx($,{children:i.jsxs(D,{className:"flex items-center gap-2",children:[i.jsx($t,{className:"h-5 w-5"}),"Quiz Attempts"]})}),i.jsx(F,{children:d?i.jsx(L,{className:"h-48 w-full"}):i.jsx(ce,{data:((B=b("quiz_attempts"))==null?void 0:B.date_data)||{},title:"Quiz Attempts",color:"#ef4444"})})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(I,{children:[i.jsx($,{children:i.jsx(D,{children:"Traffic Sources"})}),i.jsx(F,{children:d?i.jsx(L,{className:"h-64 w-full"}):i.jsx(On,{data:((Z=(M=b("page_views"))==null?void 0:M.breakdown_data)==null?void 0:Z.by_source)||{}})})]}),i.jsxs(I,{children:[i.jsx($,{children:i.jsx(D,{children:"Most Popular Categories"})}),i.jsx(F,{children:d?i.jsx("div",{className:"space-y-2",children:[...Array(5)].map((A,k)=>i.jsx(L,{className:"h-8 w-full"},k))}):i.jsx("div",{className:"space-y-4",children:v==null?void 0:v.slice(0,5).map((A,k)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["#",k+1]}),i.jsx("span",{className:"font-medium",children:A.name})]}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[A.count," rankings"]})]},A.name))})})]})]})]})})}):i.jsx("div",{className:"bg-background text-foreground flex-grow flex flex-col",children:i.jsx("div",{className:"container mx-auto px-4 py-8 flex-grow",children:i.jsxs(Ve,{variant:"destructive",className:"max-w-2xl mx-auto",children:[i.jsx(ir,{className:"h-4 w-4"}),i.jsx(We,{children:"Access Denied"}),i.jsx(Ze,{children:"You do not have permission to view this page. Administrator access is required."})]})})})};export{In as default};
